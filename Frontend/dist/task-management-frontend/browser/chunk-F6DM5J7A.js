import{F as dt,G as ot,b as J,e as K,f as Q,g as U,h as Y,i as Z,l as $,n as tt,p as et,t as at,u as it,w as rt,x as nt}from"./chunk-CHUO5JJE.js";import"./chunk-EJJBCPAK.js";import{j as X}from"./chunk-LXDFS2T4.js";import{$a as h,Da as n,Ea as r,Fb as W,Hb as z,I,J as E,Ja as D,Lb as H,Ma as f,O as b,Oa as s,P as A,Pa as V,Q as M,Qa as j,T as l,U as u,Ya as d,Za as P,_a as v,a as w,ab as x,bb as C,db as _,ea as c,fa as p,fb as L,gb as B,hc as S,pc as O,ra as F,tc as q,ub as N,va as g,vc as G,wb as R,xa as k,xb as y}from"./chunk-H2OYFBA6.js";var ft=["*"];var vt=new E("MAT_CARD_CONFIG"),ct=(()=>{class e{constructor(t){this.appearance=t?.appearance||"raised"}static{this.\u0275fac=function(a){return new(a||e)(p(vt,8))}}static{this.\u0275cmp=b({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(a,i){a&2&&k("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[_],ngContentSelectors:ft,decls:1,vars:0,template:function(a,i){a&1&&(V(),j(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-app-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-app-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-app-corner-medium));border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color, var(--mat-app-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-app-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-app-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-app-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-app-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-app-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-app-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-app-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-app-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-app-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-app-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-app-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-app-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return e})(),mt=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275dir=M({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0})}}return e})();var st=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275dir=M({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return e})();var lt=(()=>{class e{constructor(){this.align="start"}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275dir=M({type:e,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(a,i){a&2&&k("mat-mdc-card-actions-align-end",i.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0})}}return e})();var ut=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275mod=A({type:e})}static{this.\u0275inj=I({imports:[S,y,S]})}}return e})();function xt(e,m){e&1&&(n(0,"div"),d(1,"Loading..."),r())}function Ct(e,m){e&1&&(n(0,"div"),d(1,"Error loading task."),r())}function bt(e,m){if(e&1){let t=D();n(0,"mat-card")(1,"mat-card-title"),d(2),r(),n(3,"mat-card-content")(4,"p")(5,"strong"),d(6,"Description:"),r(),d(7),r(),n(8,"p")(9,"strong"),d(10,"Due Date:"),r(),d(11),L(12,"date"),r(),n(13,"p")(14,"strong"),d(15,"Priority:"),r(),d(16),r(),n(17,"p")(18,"strong"),d(19,"Status:"),r(),d(20),r()(),n(21,"mat-card-actions")(22,"button",2),f("click",function(){l(t);let i=s();return u(i.enableEdit())}),d(23,"Edit"),r(),n(24,"button",3),f("click",function(){l(t);let i=s();return u(i.goBack())}),d(25,"Back"),r()()()}if(e&2){let t=s();c(2),P(t.task.title),c(5),v(" ",t.task.description,""),c(4),v(" ",B(12,5,t.task.dueDate),""),c(5),v(" ",t.task.priority,""),c(4),v(" ",t.task.status,"")}}function Mt(e,m){if(e&1){let t=D();n(0,"mat-card")(1,"form",4,0),f("ngSubmit",function(){l(t);let i=s();return u(i.saveTask())}),n(3,"mat-card-title"),d(4,"Edit Task"),r(),n(5,"mat-form-field",5)(6,"mat-label"),d(7,"Title"),r(),n(8,"input",6),C("ngModelChange",function(i){l(t);let o=s();return x(o.editedTask.title,i)||(o.editedTask.title=i),u(i)}),r()(),n(9,"mat-form-field",5)(10,"mat-label"),d(11,"Due Date"),r(),n(12,"input",7),C("ngModelChange",function(i){l(t);let o=s();return x(o.editedTask.dueDate,i)||(o.editedTask.dueDate=i),u(i)}),r()(),n(13,"mat-form-field",5)(14,"mat-label"),d(15,"Priority"),r(),n(16,"mat-select",8),C("ngModelChange",function(i){l(t);let o=s();return x(o.editedTask.priority,i)||(o.editedTask.priority=i),u(i)}),n(17,"mat-option",9),d(18,"Low"),r(),n(19,"mat-option",10),d(20,"Medium"),r(),n(21,"mat-option",11),d(22,"High"),r()()(),n(23,"mat-form-field",5)(24,"mat-label"),d(25,"Status"),r(),n(26,"mat-select",12),C("ngModelChange",function(i){l(t);let o=s();return x(o.editedTask.status,i)||(o.editedTask.status=i),u(i)}),n(27,"mat-option",13),d(28,"Pending"),r(),n(29,"mat-option",14),d(30,"In Progress"),r(),n(31,"mat-option",15),d(32,"Completed"),r()()(),n(33,"mat-card-actions")(34,"button",16),d(35,"Save"),r(),n(36,"button",17),f("click",function(){l(t);let i=s();return u(i.cancelEdit())}),d(37,"Cancel"),r()()()()}if(e&2){let t=s();c(8),h("ngModel",t.editedTask.title),c(4),h("ngModel",t.editedTask.dueDate),c(4),h("ngModel",t.editedTask.priority),c(10),h("ngModel",t.editedTask.status)}}var pt=class e{constructor(m,t,a){this.route=m;this.router=t;this.taskService=a;this.routeSub=this.route.paramMap.subscribe(i=>{let o=i.get("id"),T=o?+o:null;T?this.fetchTask(T):(console.log("HHHHHs"),this.loading=!1,this.error=!0)})}task=null;editedTask={};loading=!0;error=!1;editMode=!1;routeSub;ngOnInit(){this.routeSub=this.route.paramMap.subscribe(m=>{let t=m.get("id"),a=t?Number(t):null;a?this.fetchTask(a):(this.loading=!1,this.error=!0)})}fetchTask(m){this.loading=!0,this.error=!1,this.taskService.getTask(m).subscribe({next:t=>{this.task=t,this.loading=!1},error:()=>{this.error=!0,this.loading=!1}})}goBack(){this.router.navigate(["/tasks"])}enableEdit(){this.task&&(this.editMode=!0,this.editedTask=w({},this.task))}cancelEdit(){this.editMode=!1}saveTask(){!this.task||this.task.id===void 0||(console.log("Saevevevev"),console.log(this.task),this.taskService.updateTask(this.task.id,this.editedTask).subscribe({next:m=>{this.task=m,this.editMode=!1},error:()=>{alert("Failed to update task.")}}))}ngOnDestroy(){this.routeSub?.unsubscribe()}static \u0275fac=function(t){return new(t||e)(p(W),p(z),p(X))};static \u0275cmp=b({type:e,selectors:[["app-task-detail"]],standalone:!0,features:[_],decls:4,vars:4,consts:[["editForm","ngForm"],[4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","",3,"click"],[3,"ngSubmit"],["appearance","outline"],["matInput","","name","title","required","",3,"ngModelChange","ngModel"],["matInput","","type","date","name","dueDate","required","",3,"ngModelChange","ngModel"],["name","priority","required","",3,"ngModelChange","ngModel"],["value","Low"],["value","Medium"],["value","High"],["name","status","required","",3,"ngModelChange","ngModel"],["value","Pending"],["value","InProgress"],["value","Completed"],["mat-raised-button","","color","primary","type","submit"],["mat-button","","type","button",3,"click"]],template:function(t,a){t&1&&F(0,xt,2,0,"div",1)(1,Ct,2,0,"div",1)(2,bt,26,7,"mat-card",1)(3,Mt,38,4,"mat-card",1),t&2&&(g("ngIf",a.loading),c(),g("ngIf",a.error),c(),g("ngIf",!a.editMode&&a.task),c(),g("ngIf",a.editMode))},dependencies:[y,N,R,H,ut,ct,lt,st,mt,G,q,tt,Z,J,K,Q,$,Y,U,it,at,et,nt,rt,ot,dt,O]})};export{pt as TaskDetailComponent};
